syntax = "proto2";
package tdrec.protos;

message FeatureManager {
    repeated FeatureConfig features = 1;
}

message FeatureConfig {
    oneof feature {
        IdFeature id_feature = 1;
        RawFeature raw_feature = 2;
    }
}

message IdFeature {
    required string input_name = 1;
    // feature input, e.g. item:item_id
    optional string feature_name = 2;
    // embedding name, feature with same embedding name will share embedding
    required string embedding_name = 3;
    // embedding dimension
    required uint32 embedding_dim = 4;
    // number of hash size
    optional uint64 hash_bucket_size = 5;
    // number of id enumerators
    optional uint64 num_buckets = 6;
}

message RawFeature {
    required string input_name = 1;
    // feature input, e.g. item:item_id
    optional string feature_name = 2;
    // embedding name, feature with same embedding name will share embedding
    optional string embedding_name = 3;
    // embedding dimension
    optional uint32 embedding_dim = 4;
}
